# Learning Agent 后端配置

# Server
server.port=3001
# 注意：移除 context-path 以支持前端页面，API 路由在控制器中添加 /api 前缀
# server.servlet.context-path=/api

# Thymeleaf 配置
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html
spring.thymeleaf.mode=HTML
spring.thymeleaf.cache=false

# 文心一言 API 配置 (兼容 OpenAI 接口格式)
wenxin.api.key=${WENXIN_API_KEY:}
wenxin.api.base-url=${WENXIN_BASE_URL:https://aistudio.baidu.com/llm/lmapi/v3}
wenxin.api.model=${WENXIN_MODEL:ernie-4.5-turbo-vl}

# Notion MCP 配置
notion.mcp.token=${NOTION_MCP_TOKEN:}
notion.mcp.version=${NOTION_MCP_VERSION:2022-06-28}

# PaddleOCR MCP 配置
paddleocr.mcp.server=${PADDLE_OCR_MCP_SERVER:paddleocr}
paddleocr.request.timeout-ms=${PADDLE_OCR_REQUEST_TIMEOUT_MS:120000}
paddleocr.request.retries=${PADDLE_OCR_REQUEST_RETRIES:3}
paddleocr.mcp.init-timeout-sec=${PADDLEOCR_MCP_TIMEOUT:120}

# MCP 配置文件路径
mcp.config.path=${MCP_CONFIG_PATH:mcp-config.jsonc}

# 文件上传配置
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
upload.dir=uploads

# 数据存储目录
data.dir=data

# SQLite 数据库配置
spring.datasource.url=jdbc:sqlite:${data.dir}/learning_agent.db
spring.datasource.driver-class-name=org.sqlite.JDBC
spring.sql.init.mode=always
spring.sql.init.schema-locations=classpath:schema.sql

# Jackson 配置
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.default-property-inclusion=non_null

# Agent 执行配置
# 是否使用 ReAct 模式执行任务（适用于不支持标准 function calling 的模型如文心一言）
agent.execution.use-react-mode=${USE_REACT_MODE:true}

# Logging
logging.level.com.learning=DEBUG
logging.level.dev.langchain4j=DEBUG
# 禁用Spring RestClient的DEBUG日志，避免显示完整请求体
logging.level.org.springframework.web.client.DefaultRestClient=INFO
logging.level.org.springframework.web.client=DEBUG
logging.level.org.springframework.http.client=DEBUG
logging.file.path=logs/
